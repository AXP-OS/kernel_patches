From 399df7274d7bc2b560b387fa9a508f620432963b Mon Sep 17 00:00:00 2001
From: Shalini Krishnamoorthi <shakri@codeaurora.org>
Date: Thu, 30 Jun 2016 14:00:04 -0700
Subject: [PATCH] msm: mdss: Correct the format specifiers in sscanf function

In many parts of the code the sscanf function was getting
an unsigned integer with a wrong format specifier. Changed
the format specifiers appropriately. Single variable sscanf
were replaced by kstrtouint at reported places.

CRs-Fixed: 1024872
CAF-Change-Id: I03ce718b0456d437d31d701586965d0aa7443b51
Signed-off-by: Shalini Krishnamoorthi <shakri@codeaurora.org>
[haggertk]: Backport to 3.4/msm8974
CVE-2016-10232

Change-Id: Ie5913a1479e7517a13addcba72efb44698b773c6
Signed-off-by: Kevin F. Haggerty <haggertk@lineageos.org>
---
 drivers/video/msm/mdss/mdss_fb.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/video/msm/mdss/mdss_fb.c b/drivers/video/msm/mdss/mdss_fb.c
index 06c075b86fd..0cf1d8af39b 100644
--- a/drivers/video/msm/mdss/mdss_fb.c
+++ b/drivers/video/msm/mdss/mdss_fb.c
@@ -2,7 +2,7 @@
  * Core MDSS framebuffer driver.
  *
  * Copyright (C) 2007 Google Incorporated
- * Copyright (c) 2008-2015, The Linux Foundation. All rights reserved.
+ * Copyright (c) 2008-2016, The Linux Foundation. All rights reserved.
  *
  * This software is licensed under the terms of the GNU General Public
  * License version 2, as published by the Free Software Foundation, and
@@ -519,7 +519,7 @@ static ssize_t mdss_set_rgb(struct device *dev,
 	if (count > 19)
 		return -EINVAL;
 
-	sscanf(buf, "%d %d %d", &r, &g, &b);
+	sscanf(buf, "%u %u %u", &r, &g, &b);
 
 	if (r < 0 || r > 32768)
 		return -EINVAL;
