From 6acda52421a074befd3b387626a7fadef3afc4bc Mon Sep 17 00:00:00 2001
From: Ranjith Kagathi Ananda <ranjith@codeaurora.org>
Date: Fri, 4 Sep 2015 16:48:10 -0700
Subject: [PATCH] msm: ispif: Remove handling of SD_SHUTDOWN

Remove handling of SD_SHUTDOWN to avoid multiple release.

Bug: 31243641

Change-Id: I09db8adb766d2e7889443f779a716aaa2f6c09d1
Signed-off-by: Harsh Shah <harshs@codeaurora.org>
Signed-off-by: Ranjith Kagathi Ananda <ranjith@codeaurora.org>
[haggertk]: Only required by LL driver, MM driver was already patched
CVE-2016-8444
Signed-off-by: Kevin F. Haggerty <haggertk@lineageos.org>
---
 drivers/media/platform/msm/camera_ll/ispif/msm_ispif.c | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/drivers/media/platform/msm/camera_ll/ispif/msm_ispif.c b/drivers/media/platform/msm/camera_ll/ispif/msm_ispif.c
index da8734bffec..fcf3128bbe5 100755
--- a/drivers/media/platform/msm/camera_ll/ispif/msm_ispif.c
+++ b/drivers/media/platform/msm/camera_ll/ispif/msm_ispif.c
@@ -1088,9 +1088,6 @@ static long msm_ispif_subdev_ioctl(struct v4l2_subdev *sd,
 	case VIDIOC_MSM_ISPIF_CFG:
 		return msm_ispif_cmd(sd, arg);
 	case MSM_SD_SHUTDOWN: {
-		struct ispif_device *ispif =
-			(struct ispif_device *)v4l2_get_subdevdata(sd);
-		msm_ispif_release(ispif);
 		return 0;
 	}
 	default:
