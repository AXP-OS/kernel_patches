From 2c4e0a1b733bd97695dd341a921ac135c845ff05 Mon Sep 17 00:00:00 2001
From: Anurag Chouhan <achouhan@codeaurora.org>
Date: Mon, 12 Sep 2016 14:52:45 +0530
Subject: qcacld-3.0: Add check to Validate cfg_ini

qcacld-2.0 to qcacld-3.0 propagation

Validate cfg_ini before dereferencing the ini
parameter gEnableRoamDelayStats.

Change-Id: I0b2b78f8838cb1c46c60669b8f327ac18e863e80
CRs-Fixed: 1059205
---
 core/hdd/src/wlan_hdd_assoc.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/core/hdd/src/wlan_hdd_assoc.c b/core/hdd/src/wlan_hdd_assoc.c
index bea032f..22f7e0d 100644
--- a/core/hdd/src/wlan_hdd_assoc.c
+++ b/core/hdd/src/wlan_hdd_assoc.c
@@ -2359,6 +2359,11 @@ static QDF_STATUS hdd_association_completion_handler(hdd_adapter_t *pAdapter,
 		return QDF_STATUS_E_FAILURE;
 	}
 
+	/* validate config */
+	if (!pHddCtx->config) {
+		hdd_err("config is NULL");
+		return QDF_STATUS_E_NULL_VALUE;
+	}
 	/* HDD has initiated disconnect, do not send connect result indication
 	 * to kernel as it will be handled by __cfg80211_disconnect.
 	 */
-- 
cgit v1.1

