From b6e067c17fd710bf4714213ab10ba90d5a774aef Mon Sep 17 00:00:00 2001
From: Amir Levy <alevy@codeaurora.org>
Date: Wed, 31 Jul 2019 13:54:47 +0300
Subject: msm: ipa4: null terminate FST dev name

Null terminate FST dev name to insure proper dev name
is used.

CRs-Fixed: 2493328
Change-Id: I8042087a43aa9d4197ed410f7e76f8ce21e9dfac
Signed-off-by: Amir Levy <alevy@codeaurora.org>
---
 drivers/platform/msm/ipa/ipa_v3/ipa.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/drivers/platform/msm/ipa/ipa_v3/ipa.c b/drivers/platform/msm/ipa/ipa_v3/ipa.c
index 665b142..ce53694 100644
--- a/drivers/platform/msm/ipa/ipa_v3/ipa.c
+++ b/drivers/platform/msm/ipa/ipa_v3/ipa.c
@@ -2630,6 +2630,10 @@ static long ipa3_ioctl(struct file *filp, unsigned int cmd, unsigned long arg)
 			retval = -EFAULT;
 			break;
 		}
+
+		/* null terminate the string */
+		fst_switch.netdev_name[IPA_RESOURCE_NAME_MAX - 1] = '\0';
+
 		retval = ipa_wigig_send_msg(WIGIG_FST_SWITCH,
 			fst_switch.netdev_name,
 			fst_switch.client_mac_addr,
-- 
cgit v1.1

