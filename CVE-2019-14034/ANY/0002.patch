From 2f73f3f8c5e589f7cdf719bcc83524048fff9344 Mon Sep 17 00:00:00 2001
From: Raja Mallik <rmallik@codeaurora.org>
Date: Fri, 9 Aug 2019 16:55:14 +0530
Subject: msm: camera: eeprom: Release the mutex even though got error

Release the mutex even though got error.

Change-Id: I17a7f7b5ae91135e435bcbc14bece744465b9dd2
Signed-off-by: Depeng Shao <depengs@codeaurora.org>
Signed-off-by: Raja Mallik <rmallik@codeaurora.org>
---
 .../msm/camera_v3/cam_sensor_module/cam_eeprom/cam_eeprom_core.c        | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/media/platform/msm/camera_v3/cam_sensor_module/cam_eeprom/cam_eeprom_core.c b/drivers/media/platform/msm/camera_v3/cam_sensor_module/cam_eeprom/cam_eeprom_core.c
index 06d6bd4..bcd3823 100644
--- a/drivers/media/platform/msm/camera_v3/cam_sensor_module/cam_eeprom/cam_eeprom_core.c
+++ b/drivers/media/platform/msm/camera_v3/cam_sensor_module/cam_eeprom/cam_eeprom_core.c
@@ -1016,7 +1016,7 @@ int32_t cam_eeprom_driver_cmd(struct cam_eeprom_ctrl_t *e_ctrl, void *arg)
 			&eeprom_cap,
 			sizeof(struct cam_eeprom_query_cap_t))) {
 			CAM_ERR(CAM_EEPROM, "Failed Copy to User");
-			return -EFAULT;
+			rc = -EFAULT;
 			goto release_mutex;
 		}
 		CAM_DBG(CAM_EEPROM, "eeprom_cap: ID: %d", eeprom_cap.slot_info);
-- 
cgit v1.1

