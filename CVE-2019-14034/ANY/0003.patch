From bbd5ba65fb26fad49f06927015ddf5e0bcffab0c Mon Sep 17 00:00:00 2001
From: E V Ravi <evenka@codeaurora.org>
Date: Fri, 30 Aug 2019 15:58:37 +0530
Subject: msm: ais: eeprom: Release the mutex even though got error

Release the mutex even though got error.

Change-Id: I9150119df6d9c0f1c3a2140b464a7292775d79af
Signed-off-by: E V Ravi <evenka@codeaurora.org>
---
 .../platform/msm/ais/cam_sensor_module/cam_eeprom/cam_eeprom_core.c     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/media/platform/msm/ais/cam_sensor_module/cam_eeprom/cam_eeprom_core.c b/drivers/media/platform/msm/ais/cam_sensor_module/cam_eeprom/cam_eeprom_core.c
index 3683fc7..0c65c7a 100644
--- a/drivers/media/platform/msm/ais/cam_sensor_module/cam_eeprom/cam_eeprom_core.c
+++ b/drivers/media/platform/msm/ais/cam_sensor_module/cam_eeprom/cam_eeprom_core.c
@@ -1015,7 +1015,7 @@ int32_t cam_eeprom_driver_cmd(struct cam_eeprom_ctrl_t *e_ctrl, void *arg)
 			&eeprom_cap,
 			sizeof(struct cam_eeprom_query_cap_t))) {
 			CAM_ERR(CAM_EEPROM, "Failed Copy to User");
-			return -EFAULT;
+			rc = -EFAULT;
 			goto release_mutex;
 		}
 		CAM_DBG(CAM_EEPROM, "eeprom_cap: ID: %d", eeprom_cap.slot_info);
-- 
cgit v1.1

