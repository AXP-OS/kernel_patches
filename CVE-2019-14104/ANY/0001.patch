From 9910e89b27224fbddbf7d15d307597e13d9b9258 Mon Sep 17 00:00:00 2001
From: Vishalsingh Hajeri <vhajeri@codeaurora.org>
Date: Mon, 4 Jun 2018 16:17:33 -0700
Subject: msm: camera: context: Add null check on context pointer

Check for context pointer being null, before accessing its
members.

Change-Id: I778c44e743edddcddf0f2fd6fd49336dfe00baf0
Signed-off-by: Vishalsingh Hajeri <vhajeri@codeaurora.org>
---
 drivers/media/platform/msm/camera/cam_core/cam_context.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/media/platform/msm/camera/cam_core/cam_context.c b/drivers/media/platform/msm/camera/cam_core/cam_context.c
index 8beffc4..891b738 100644
--- a/drivers/media/platform/msm/camera/cam_core/cam_context.c
+++ b/drivers/media/platform/msm/camera/cam_core/cam_context.c
@@ -355,7 +355,7 @@ int cam_context_handle_start_dev(struct cam_context *ctx,
 {
 	int rc = 0;
 
-	if (!ctx->state_machine) {
+	if (!ctx || !ctx->state_machine) {
 		CAM_ERR(CAM_CORE, "Context is not ready");
 		return -EINVAL;
 	}
@@ -384,7 +384,7 @@ int cam_context_handle_stop_dev(struct cam_context *ctx,
 {
 	int rc = 0;
 
-	if (!ctx->state_machine) {
+	if (!ctx || !ctx->state_machine) {
 		CAM_ERR(CAM_CORE, "Context is not ready");
 		return -EINVAL;
 	}
-- 
cgit v1.1

