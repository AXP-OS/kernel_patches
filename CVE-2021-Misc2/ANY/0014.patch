From 6d3113ef7410ae7dc81e43e8779fa513d58f9ce2 Mon Sep 17 00:00:00 2001
From: Dundi Raviteja <dundi@codeaurora.org>
Date: Thu, 7 May 2020 16:23:15 +0530
Subject: [PATCH] wlan: check count variable while removing from list

list_empty() can still return false even if list is not initialized.
so, while removing from list use count variable to check whether
the list is empty or not.

Change-Id: I436ec6df3ef41227563d1efdb528e0444f199390
CRs-Fixed: 2679126
---
 drivers/staging/prima/CORE/HDD/src/wlan_hdd_dp_utils.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/staging/prima/CORE/HDD/src/wlan_hdd_dp_utils.c b/drivers/staging/prima/CORE/HDD/src/wlan_hdd_dp_utils.c
index 7a18c4e773d..18c46df1b7d 100644
--- a/drivers/staging/prima/CORE/HDD/src/wlan_hdd_dp_utils.c
+++ b/drivers/staging/prima/CORE/HDD/src/wlan_hdd_dp_utils.c
@@ -79,7 +79,7 @@ VOS_STATUS hdd_list_remove_front( hdd_list_t *pList, hdd_list_node_t **ppNode )
 {
    struct list_head * listptr;
 
-   if ( list_empty( &pList->anchor ) )
+   if (!pList->count)
    {
       return VOS_STATUS_E_EMPTY;
    }
@@ -96,7 +96,7 @@ VOS_STATUS hdd_list_remove_back( hdd_list_t *pList, hdd_list_node_t **ppNode )
 {
    struct list_head * listptr;
 
-   if ( list_empty( &pList->anchor ) )
+   if (!pList->count)
    {
       return VOS_STATUS_E_EMPTY;
    }
