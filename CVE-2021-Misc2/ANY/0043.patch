From 0a25b3c7c0e1c5e536453c6f21541633184cbb6d Mon Sep 17 00:00:00 2001
From: Sravan Kumar Kairam <sgoud@codeaurora.org>
Date: Tue, 21 Feb 2017 11:59:13 +0530
Subject: [PATCH] wlan: Fix RX thread stuck in while loop

Currently during roaming for LFR make before break feature under
stress testing RX thread is stuck in while loop resulting in host
RX low resource and firmware watch dog bite. In this change refactor
the code to check for null termination of the received frames rather
than checking for the local variable pointer assigned to the input
received frames.

Change-Id: I47b40566d52134b58304541c708cd87263fabfc6
CRs-Fixed: 2009414
---
 drivers/staging/prima/CORE/TL/src/wlan_qct_tl.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/staging/prima/CORE/TL/src/wlan_qct_tl.c b/drivers/staging/prima/CORE/TL/src/wlan_qct_tl.c
index dde6092495f7..084ea7486e1d 100644
--- a/drivers/staging/prima/CORE/TL/src/wlan_qct_tl.c
+++ b/drivers/staging/prima/CORE/TL/src/wlan_qct_tl.c
@@ -5668,7 +5668,7 @@ WLANTL_RxCachedFrames
    ---------------------------------------------------------------------*/
   vosTempBuff = vosDataBuff;
 
-  while ( NULL != vosTempBuff )
+  while (NULL != vosDataBuff)
   {
     broadcast = VOS_FALSE;
     selfBcastLoopback = VOS_FALSE; 
