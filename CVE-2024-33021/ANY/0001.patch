From 9bf5aef3e58ccad5dbaa5059030f71e24b87d11b Mon Sep 17 00:00:00 2001
From: juzhan <quic_juzhan@quicinc.com>
Date: Thu, 25 Jan 2024 10:54:50 +0800
Subject: [PATCH] soc: qcom: hgsl: Initialize metainfo

Initialize metainfo with 0 before copying user data into it.

Change-Id: Ib793100a95d0138c70c1b64372039dbfc098c722
Signed-off-by: juzhan <quic_juzhan@quicinc.com>
(cherry picked from commit 7e0b9e4a8366ed7c9018007143cf3a6571c80c8c)
---
 drivers/soc/qcom/hgsl/hgsl.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/soc/qcom/hgsl/hgsl.c b/drivers/soc/qcom/hgsl/hgsl.c
index fd7082fe444d5..4e79d842028f3 100644
--- a/drivers/soc/qcom/hgsl/hgsl.c
+++ b/drivers/soc/qcom/hgsl/hgsl.c
@@ -1,7 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0-only
 /*
  * Copyright (c) 2019-2022, The Linux Foundation. All rights reserved.
- * Copyright (c) 2022-2023 Qualcomm Innovation Center, Inc. All rights reserved.
+ * Copyright (c) 2022-2024 Qualcomm Innovation Center, Inc. All rights reserved.
  */
 
 #include <asm/unistd.h>
@@ -2368,7 +2368,7 @@ static int hgsl_ioctl_set_metainfo(struct file *filep, unsigned long arg)
 	int ret = 0;
 	struct hgsl_mem_node *mem_node = NULL;
 	struct hgsl_mem_node *tmp = NULL;
-	char metainfo[HGSL_MEM_META_MAX_SIZE];
+	char metainfo[HGSL_MEM_META_MAX_SIZE] = {0};
 
 	if (copy_from_user(&params, USRPTR(arg), sizeof(params))) {
 		LOGE("failed to copy params from user");
-- 
GitLab

